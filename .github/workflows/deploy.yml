---
# Documentation located
# https://github.com/marketplace/actions/publish-python-poetry-package
name: Deploy to PyPi

on:
  push:
    branches:
      - develop
      - main

defaults:
  run:
    shell: bash

env:
  LANG: en_US.utf-8
  LC_ALL: en_US.utf-8
  PYPI_TOKEN: ${{ secrets.PYPI_TOKEN }}

jobs:

  publish_to_pypi:

    runs-on: ubuntu-20.04

    steps:
      - run: echo "üéâ The job was automatically triggered by a ${{ github.event_name }} event."
      - run: echo "üêß This job is now running on a ${{ runner.os }} server hosted by GitHub!"
      - run: echo "üîé The name of your branch is ${{ github.ref }} and your repository is ${{ github.repository }}."

      - name: Checkout code
        uses: actions/checkout@v2
      
      - name: Publish to pypi
        run: echo "Publishing to pypi"

      # - name: Build and publish to pypi
      #   uses: JRubics/poetry-publish@v1.7
      #   with:
      #     # These are only needed when using test.pypi
      #     #repository_name: testpypi
      #     #repository_url: https://test.pypi.org/legacy/
      #     pypi_token: ${{ secrets.PYPI_TOKEN }}
      #     ignore_dev_requirements: "yes"